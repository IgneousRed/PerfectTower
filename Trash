:name Ir.Trash

:local string data
:local int start
:local int end
:local int tiers
:local int t

#space_index index(data, " ", start)
#next_end if({space_index} == -1, len(data), {space_index})
#selected sub(data, start, end - start)
#zero_ten2i(s) if({s} == "10", 10, index("0123456789", {s}, 0))

key.t()

isopen("factory")

executesync("turbo start")

; How many tiers to trash, simple!
data = "\
0 block.dense \
0 plate.dense \
9 screw \
0 plate.rubber \
9 plate.circuit \
9 ring \
9 pipe \
9 wire \
9 circuit \
2 hammer \
0 motor \
0 chip \
0 cable.insulated \
0 block \
0 pump \
0 plate.stack \
0 lump \
3 producer.town \
3 producer.mine \
3 producer.powerplant \
3 producer.factory \
3 producer.workshop \
3 producer.constructionFirm \
3 producer.headquarters \
3 producer.laboratory \
3 producer.tradingpost \
3 producer.arcade \
3 producer.museum \
3 producer.shipyard \
3 producer.statueofcubos \
3 producer.gems \
3 producer.exoticgems \
9 machine.oven \
9 machine.presser \
9 machine.transportbelt \
9 machine.crusher \
9 machine.mixer \
9 machine.refinery \
9 machine.assembler \
9 machine.shaper \
9 machine.cutter \
9 machine.boiler \
0 sapling.rubber \
0 rubber \
0 ore \
0 dust \
0 ingot \
9 rod \
9 plate \
9 cable \
"

item_inc:
end = {next_end}
tiers = {zero_ten2i({selected})}
start = end + 1
end = {next_end}

tier_inc:
gotoif(tier_unset, tiers <= t)
t += 1
trash({selected}, t, count({selected}, t))
goto(tier_inc)
tier_unset:
lu("t")
start = end + 1
gotoif(item_inc, start < len(data))
executesync("turbo stop")
wait(0.0)
