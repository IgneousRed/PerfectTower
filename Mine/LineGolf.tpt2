:name Ir.Mine.LineGolf

:local int i

#pos i % 100
#tab i / 100

; Impulses
wakeup()
open.mine()

; Conditions
isopen("mine")

; Actions
newTab:
tab({tab} + 1)

newLayer:
newlayer()

newDig:
dig({pos} % 4, {pos} / 4)
i = if({pos} == 15, i + 100 - 15, i + 1)
goto(if(isopen("mine") == false || 11 < {tab}, 99, \
  if(0 < i, newDig, \
    if(hasLayers(), newLayer, newTab))))
